
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module Dans_Diffraction.functions_crystallography</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="Dans_Diffraction.html"><font color="#ffffff">Dans_Diffraction</font></a>.functions_crystallography</strong></big></big> (version 2.5)</font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:///C:/users/grp66007/dropbox/python/dans_diffraction/dans_diffraction/functions_crystallography.py">c:\users\grp66007\dropbox\python\dans_diffraction\dans_diffraction\functions_crystallography.py</a></font></td></tr></table>
    <p><tt>Module:&nbsp;functions_crystallography.py<br>
&nbsp;<br>
By&nbsp;Dan&nbsp;Porter,&nbsp;PhD<br>
Diamond<br>
2018<br>
&nbsp;<br>
Usage:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Run&nbsp;this&nbsp;file&nbsp;in&nbsp;an&nbsp;interactive&nbsp;console<br>
&nbsp;&nbsp;&nbsp;&nbsp;OR<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;from&nbsp;Dans_Diffraction&nbsp;import&nbsp;functions_crystallography&nbsp;as&nbsp;fc<br>
&nbsp;<br>
Version&nbsp;2.5<br>
Last&nbsp;updated:&nbsp;08/06/18<br>
&nbsp;<br>
Version&nbsp;History:<br>
09/07/15&nbsp;0.1&nbsp;&nbsp;&nbsp;&nbsp;Version&nbsp;History&nbsp;started.<br>
30/10/17&nbsp;1.0&nbsp;&nbsp;&nbsp;&nbsp;Many&nbsp;updates<br>
06/01/18&nbsp;2.0&nbsp;&nbsp;&nbsp;&nbsp;Renamed&nbsp;functions_crystallography.py<br>
02/03/18&nbsp;2.1&nbsp;&nbsp;&nbsp;&nbsp;Removed&nbsp;call&nbsp;to&nbsp;tkinter<br>
05/04/18&nbsp;2.2&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;invert_sym<br>
02/05/18&nbsp;2.3&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;comparison&nbsp;of&nbsp;lower&nbsp;case&nbsp;elements&nbsp;and&nbsp;symmetry&nbsp;values<br>
04/06/18&nbsp;2.4&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;new&nbsp;checks&nbsp;to&nbsp;readcif,&nbsp;corrected&nbsp;atomic_properties&nbsp;for&nbsp;python3/numpy1.14<br>
08/06/18&nbsp;2.5&nbsp;&nbsp;&nbsp;&nbsp;Corrected&nbsp;a&nbsp;few&nbsp;errors&nbsp;and&nbsp;added&nbsp;some&nbsp;more&nbsp;comments<br>
&nbsp;<br>
@author:&nbsp;DGPorter</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="Dans_Diffraction.functions_general.html">Dans_Diffraction.functions_general</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="re.html">re</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-Bmatrix"><strong>Bmatrix</strong></a>(UV)</dt><dd><tt>Calculate&nbsp;the&nbsp;Busing&nbsp;and&nbsp;Levy&nbsp;B&nbsp;matrix&nbsp;from&nbsp;a&nbsp;real&nbsp;space&nbsp;UV</tt></dd></dl>
 <dl><dt><a name="-RcSp"><strong>RcSp</strong></a>(UV)</dt><dd><tt>Generate&nbsp;reciprocal&nbsp;cell&nbsp;from&nbsp;real&nbsp;space&nbsp;unit&nbsp;vecors<br>
Usage:<br>
UVs&nbsp;=&nbsp;<a href="#-RcSp">RcSp</a>(UV)<br>
&nbsp;&nbsp;UV&nbsp;=&nbsp;[[3x3]]&nbsp;matrix&nbsp;of&nbsp;vectors&nbsp;[a,b,c]</tt></dd></dl>
 <dl><dt><a name="-UV2latpar"><strong>UV2latpar</strong></a>(UV)</dt><dd><tt>Convert&nbsp;UV=[a,b,c]&nbsp;to&nbsp;a,b,c,alpha,beta,gamma<br>
&nbsp;a,b,c,alpha,beta,gamma&nbsp;=&nbsp;<a href="#-UV2latpar">UV2latpar</a>(UV)</tt></dd></dl>
 <dl><dt><a name="-atom_properties"><strong>atom_properties</strong></a>(elements<font color="#909090">=None</font>, fields<font color="#909090">=None</font>)</dt><dd><tt>Loads&nbsp;the&nbsp;atomic&nbsp;properties&nbsp;of&nbsp;a&nbsp;particular&nbsp;atom&nbsp;from&nbsp;a&nbsp;database<br>
&nbsp;<br>
Usage:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;atoms()&nbsp;&gt;&gt;&nbsp;returns&nbsp;structured&nbsp;array&nbsp;of&nbsp;all&nbsp;properties&nbsp;for&nbsp;all&nbsp;atoms&nbsp;A[0]['Element']='H'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;atoms('Co')&nbsp;&gt;&gt;&nbsp;returns&nbsp;structured&nbsp;array&nbsp;of&nbsp;all&nbsp;properties&nbsp;for&nbsp;1&nbsp;element<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;=&nbsp;atoms('Co','Weight')&nbsp;&gt;&gt;&nbsp;returns&nbsp;regular&nbsp;1x1&nbsp;array<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;=&nbsp;atoms(['Co','O'],'Weight')&nbsp;&gt;&gt;&nbsp;retruns&nbsp;regular&nbsp;2x1&nbsp;array<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;atoms('Co',['a1','b1','a2','b2','a3','b3','a4','b4','c'])&nbsp;&gt;&gt;&nbsp;returns&nbsp;structured&nbsp;array&nbsp;of&nbsp;requested&nbsp;properties<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;atoms(['Co','O'],['Z','Weight'])&nbsp;&gt;&gt;&nbsp;returns&nbsp;2x2&nbsp;structured&nbsp;array<br>
&nbsp;<br>
Available&nbsp;information&nbsp;includes:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Element&nbsp;number<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element&nbsp;Name&nbsp;&nbsp;=&nbsp;Element&nbsp;name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Coh_b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Bound&nbsp;coherent&nbsp;neutron&nbsp;scattering&nbsp;length<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inc_b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Bound&nbsp;incoherent&nbsp;neutron&nbsp;scattering&nbsp;length<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nabs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Neutron&nbsp;absorption&nbsp;coefficient<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nscat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Neutron&nbsp;scattering&nbsp;coefficient<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Electron&nbsp;form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j0_D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Magnetic&nbsp;Form&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Radii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Atomic&nbsp;Radii&nbsp;(pm)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValenceE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Number&nbsp;of&nbsp;valence&nbsp;electrons<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Weight&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Standard&nbsp;atomic&nbsp;weight&nbsp;(g)</tt></dd></dl>
 <dl><dt><a name="-attenuation"><strong>attenuation</strong></a>(element_Z, energy_keV)</dt><dd><tt>Returns&nbsp;the&nbsp;x-ray&nbsp;mass&nbsp;attenuation,&nbsp;u/p,&nbsp;in&nbsp;cm^2/g<br>
&nbsp;&nbsp;e.g.&nbsp;A&nbsp;=&nbsp;<a href="#-attenuation">attenuation</a>(23,np.arange(7,8,0.01))&nbsp;#&nbsp;Cu<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;=&nbsp;<a href="#-attenuation">attenuation</a>(19,4.5)&nbsp;#&nbsp;K</tt></dd></dl>
 <dl><dt><a name="-biso2uiso"><strong>biso2uiso</strong></a>(biso)</dt><dd><tt>Convert&nbsp;B&nbsp;isotropic&nbsp;thermal&nbsp;parameters&nbsp;to&nbsp;U&nbsp;isotropic&nbsp;thermal&nbsp;parameters<br>
:param&nbsp;biso:&nbsp;Biso&nbsp;value&nbsp;or&nbsp;array<br>
:return:&nbsp;Uiso&nbsp;value&nbsp;or&nbsp;array</tt></dd></dl>
 <dl><dt><a name="-cal2theta"><strong>cal2theta</strong></a>(Qmag, energy_kev<font color="#909090">=17.794</font>)</dt><dd><tt>Calculate&nbsp;theta&nbsp;at&nbsp;particular&nbsp;energy&nbsp;in&nbsp;eV&nbsp;from&nbsp;|Q|<br>
&nbsp;X2T&nbsp;=&nbsp;<a href="#-cal2theta">cal2theta</a>(Qmag,energy_kev=17794)</tt></dd></dl>
 <dl><dt><a name="-calQmag"><strong>calQmag</strong></a>(x2T, energy_kev<font color="#909090">=17.794</font>)</dt><dd><tt>Calculate&nbsp;|Q|&nbsp;at&nbsp;a&nbsp;particular&nbsp;2-theta&nbsp;(deg)&nbsp;for&nbsp;energy&nbsp;in&nbsp;eV<br>
&nbsp;magQ&nbsp;=&nbsp;<a href="#-calQmag">calQmag</a>(X2T,energy_kev=17.794)</tt></dd></dl>
 <dl><dt><a name="-calc_vol"><strong>calc_vol</strong></a>(UV)</dt><dd><tt>Calculate&nbsp;volume&nbsp;in&nbsp;Angstrom^3&nbsp;from&nbsp;unit&nbsp;vectors</tt></dd></dl>
 <dl><dt><a name="-caldspace"><strong>caldspace</strong></a>(Qmag)</dt><dd><tt>Calculate&nbsp;d-spacing&nbsp;from&nbsp;|Q|<br>
&nbsp;dspace&nbsp;=&nbsp;<a href="#-caldspace">caldspace</a>(Qmag)</tt></dd></dl>
 <dl><dt><a name="-cif2dict"><strong>cif2dict</strong></a>(cifvals)</dt><dd><tt>Convert&nbsp;output&nbsp;of&nbsp;readcif&nbsp;into&nbsp;crys&nbsp;dict"<br>
:param&nbsp;cifvals:&nbsp;dict&nbsp;from&nbsp;readcif<br>
:return:&nbsp;dict</tt></dd></dl>
 <dl><dt><a name="-debyewaller"><strong>debyewaller</strong></a>(uiso, Qmag<font color="#909090">=[0]</font>)</dt><dd><tt>Calculate&nbsp;the&nbsp;debye&nbsp;waller&nbsp;factor&nbsp;for&nbsp;a&nbsp;particular&nbsp;Q<br>
&nbsp;T&nbsp;=&nbsp;<a href="#-debyewaller">debyewaller</a>(uiso,Qmag=[0])<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;T&nbsp;=&nbsp;exp(&nbsp;-2*pi^2*Uiso/d^2&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;T&nbsp;=&nbsp;exp(&nbsp;-Uiso/2Q^2&nbsp;)</tt></dd></dl>
 <dl><dt><a name="-diffractometer_Q"><strong>diffractometer_Q</strong></a>(eta, delta, energy_kev<font color="#909090">=8.0</font>)</dt><dd><tt>Calculate&nbsp;wavevector&nbsp;transfer,&nbsp;Q&nbsp;for&nbsp;diffractometer&nbsp;within&nbsp;the&nbsp;scattering&nbsp;plane.<br>
&nbsp;&nbsp;&nbsp;Qx,Qy&nbsp;=&nbsp;<a href="#-diffractometer_Q">diffractometer_Q</a>(eta,delta,energy_kev)<br>
&nbsp;&nbsp;&nbsp;eta&nbsp;=&nbsp;angle&nbsp;(deg)&nbsp;of&nbsp;sample<br>
&nbsp;&nbsp;&nbsp;delta&nbsp;=&nbsp;angle&nbsp;(deg)&nbsp;of&nbsp;detector<br>
&nbsp;&nbsp;&nbsp;energy_kev&nbsp;=&nbsp;energy&nbsp;in&nbsp;keV<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;Coordinate&nbsp;system&nbsp;(right&nbsp;handed):<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;-&nbsp;direction&nbsp;along&nbsp;beam,&nbsp;+ve&nbsp;is&nbsp;from&nbsp;source&nbsp;to&nbsp;sample<br>
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;-&nbsp;direction&nbsp;verticle<br>
&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;-&nbsp;direction&nbsp;horizontal<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;Note:&nbsp;Currently&nbsp;only&nbsp;in&nbsp;the&nbsp;verticle&nbsp;geometry!</tt></dd></dl>
 <dl><dt><a name="-energy2wave"><strong>energy2wave</strong></a>(energy_kev)</dt><dd><tt>Converts&nbsp;energy&nbsp;in&nbsp;keV&nbsp;to&nbsp;wavelength&nbsp;in&nbsp;A<br>
&nbsp;wavelength&nbsp;=&nbsp;<a href="#-energy2wave">energy2wave</a>(energy)</tt></dd></dl>
 <dl><dt><a name="-fitincell"><strong>fitincell</strong></a>(uvw)</dt><dd><tt>Set&nbsp;all&nbsp;fractional&nbsp;coodinates&nbsp;between&nbsp;0&nbsp;and&nbsp;1<br>
Usage:<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;<a href="#-fitincell">fitincell</a>(uvw)<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;[[nx3]]&nbsp;array&nbsp;of&nbsp;fractional&nbsp;vectors&nbsp;[u,v,w]</tt></dd></dl>
 <dl><dt><a name="-genHKL"><strong>genHKL</strong></a>(H, K<font color="#909090">=None</font>, L<font color="#909090">=None</font>)</dt><dd><tt>Generate&nbsp;HKL&nbsp;array&nbsp;with&nbsp;all&nbsp;combinations&nbsp;within&nbsp;range&nbsp;specified<br>
Usage:<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-genHKL">genHKL</a>(max)<br>
&nbsp;&nbsp;&nbsp;int&nbsp;max&nbsp;=&nbsp;generates&nbsp;each&nbsp;h,k,l&nbsp;from&nbsp;-max&nbsp;to&nbsp;max<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-genHKL">genHKL</a>([min,max])<br>
&nbsp;&nbsp;&nbsp;int&nbsp;min,&nbsp;int&nbsp;max&nbsp;=&nbsp;generates&nbsp;h,l,l&nbsp;from&nbsp;min&nbsp;to&nbsp;max<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-genHKL">genHKL</a>([hmin,hmax],[kmin,kmax],[lmin,lmax])<br>
&nbsp;&nbsp;&nbsp;hmin,hmax&nbsp;=&nbsp;min&nbsp;and&nbsp;max&nbsp;values&nbsp;for&nbsp;h,&nbsp;k&nbsp;and&nbsp;l&nbsp;respectivley<br>
&nbsp;<br>
&nbsp;&nbsp;array&nbsp;HKL&nbsp;=&nbsp;[[nx3]]&nbsp;array&nbsp;of&nbsp;[h,k,l]&nbsp;vectors<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-genHKL">genHKL</a>(-3)<br>
E.G.<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-genHKL">genHKL</a>([-1,1])<br>
E.G.<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-genHKL">genHKL</a>([-2,2],[0,3],[1,1])</tt></dd></dl>
 <dl><dt><a name="-gen_sym_mat"><strong>gen_sym_mat</strong></a>(sym_ops)</dt><dd><tt>Generate&nbsp;transformation&nbsp;matrix&nbsp;from&nbsp;symmetry&nbsp;operation<br>
Currently&nbsp;very&nbsp;ugly&nbsp;but&nbsp;it&nbsp;seems&nbsp;to&nbsp;work<br>
sym_mat&nbsp;=&nbsp;gen_syn_mat(['x,y,z','y,-x,z+1/2'])<br>
sym_mat[0]&nbsp;=&nbsp;[[&nbsp;1.,&nbsp;&nbsp;0.,&nbsp;&nbsp;0.,&nbsp;&nbsp;0.],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;0.,&nbsp;&nbsp;1.,&nbsp;&nbsp;0.,&nbsp;&nbsp;0.],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;0.,&nbsp;&nbsp;0.,&nbsp;&nbsp;1.,&nbsp;&nbsp;0.]])<br>
sym_mat[1]&nbsp;=&nbsp;[[&nbsp;0.&nbsp;,&nbsp;&nbsp;1.&nbsp;,&nbsp;&nbsp;0.&nbsp;,&nbsp;&nbsp;0.&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-1.&nbsp;,&nbsp;&nbsp;0.&nbsp;,&nbsp;&nbsp;0.&nbsp;,&nbsp;&nbsp;0.&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;0.&nbsp;,&nbsp;&nbsp;0.&nbsp;,&nbsp;&nbsp;1.&nbsp;,&nbsp;&nbsp;0.5]]</tt></dd></dl>
 <dl><dt><a name="-gen_sym_pos"><strong>gen_sym_pos</strong></a>(sym_ops, x, y, z)</dt><dd><tt>Generate&nbsp;positions&nbsp;from&nbsp;symmetry&nbsp;operations<br>
Usage:<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;<a href="#-gen_sym_pos">gen_sym_pos</a>(sym_ops,x,y,z)<br>
&nbsp;&nbsp;sym_ops&nbsp;=&nbsp;[n*'x,y,z']&nbsp;array&nbsp;of&nbsp;string&nbsp;symmetry&nbsp;operations<br>
&nbsp;&nbsp;x,y,z&nbsp;=&nbsp;fractional&nbsp;coordinates&nbsp;of&nbsp;atomic&nbsp;posiiton&nbsp;to&nbsp;be&nbsp;modified&nbsp;by&nbsp;symmetry<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;[[nx3]]&nbsp;array&nbsp;of&nbsp;symmetry&nbsp;defined&nbsp;factional&nbsp;coordinates&nbsp;[u,v,w]<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;<a href="#-gen_sym_pos">gen_sym_pos</a>(['x,y,z','y,-x,z+1/2'],0.1,0.2,0.3)<br>
&nbsp;&nbsp;uvw&nbsp;&gt;&gt;&nbsp;[[0.1,0.2,0.3]&nbsp;,&nbsp;[0.2,-0.1,0.8]]</tt></dd></dl>
 <dl><dt><a name="-gen_sym_ref"><strong>gen_sym_ref</strong></a>(sym_ops, hkl)</dt><dd><tt>Generate&nbsp;symmetric&nbsp;reflections&nbsp;given&nbsp;symmetry&nbsp;operations<br>
&nbsp;&nbsp;&nbsp;&nbsp;symhkl&nbsp;=&nbsp;<a href="#-gen_sym_ref">gen_sym_ref</a>(sym_ops,h,k,l)</tt></dd></dl>
 <dl><dt><a name="-gen_symcen_ops"><strong>gen_symcen_ops</strong></a>(sym_ops, cen_ops)</dt><dd><tt>Build&nbsp;complete&nbsp;list&nbsp;of&nbsp;symmetry&nbsp;operations&nbsp;from&nbsp;symmetry&nbsp;and&nbsp;centring&nbsp;vectors<br>
Usage:<br>
&nbsp;&nbsp;ops&nbsp;=&nbsp;<a href="#-gen_symcen_ops">gen_symcen_ops</a>(sym_ops,cen_ops)<br>
&nbsp;&nbsp;sym_ops&nbsp;=&nbsp;[n*'x,y,z']&nbsp;array&nbsp;of&nbsp;string&nbsp;symmetry&nbsp;operations<br>
&nbsp;&nbsp;cen_ops&nbsp;=&nbsp;[m*'x,y,z']&nbsp;array&nbsp;of&nbsp;string&nbsp;centring&nbsp;operations<br>
&nbsp;&nbsp;ops&nbsp;=&nbsp;[n*m*'x,y,z']&nbsp;array&nbsp;of&nbsp;string&nbsp;symmetry&nbsp;operations<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;ops&nbsp;=&nbsp;<a href="#-gen_symcen_pos">gen_symcen_pos</a>(['x,y,z','y,-x,z+1/2'],['x,y,z','x+1/3,y+1/3,z'])<br>
&nbsp;&nbsp;&gt;&gt;&nbsp;ops&nbsp;=&nbsp;['x,y,z','x+1/3,y+1/3,z','y,-x,z+1/2','y+1/3,-x+1/3,z+1/2']</tt></dd></dl>
 <dl><dt><a name="-gen_symcen_pos"><strong>gen_symcen_pos</strong></a>(sym_ops, cen_ops, x, y, z)</dt><dd><tt>Generate&nbsp;positions&nbsp;from&nbsp;symmetry&nbsp;and&nbsp;centring&nbsp;operations<br>
Usage:<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;<a href="#-gen_symcen_pos">gen_symcen_pos</a>(sym_ops,cen_ops,x,y,z)<br>
&nbsp;&nbsp;sym_ops&nbsp;=&nbsp;[n*'x,y,z']&nbsp;array&nbsp;of&nbsp;string&nbsp;symmetry&nbsp;operations<br>
&nbsp;&nbsp;cen_ops&nbsp;=&nbsp;[m*'x,y,z']&nbsp;array&nbsp;of&nbsp;string&nbsp;centring&nbsp;operations<br>
&nbsp;&nbsp;x,y,z&nbsp;=&nbsp;fractional&nbsp;coordinates&nbsp;of&nbsp;atomic&nbsp;posiiton&nbsp;to&nbsp;be&nbsp;modified&nbsp;by&nbsp;symmetry<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;[[nx3]]&nbsp;array&nbsp;of&nbsp;symmetry&nbsp;defined&nbsp;factional&nbsp;coordinates&nbsp;[u,v,w]<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;uvw&nbsp;=&nbsp;<a href="#-gen_symcen_pos">gen_symcen_pos</a>(['x,y,z','y,-x,z+1/2'],['x,y,z','x+1/3,y+1/3,z'],0.1,0.2,0.3)<br>
&nbsp;&nbsp;uvw&nbsp;&gt;&gt;&nbsp;[[0.1,0.2,0.3]&nbsp;,&nbsp;[0.433,0.533,0.3]&nbsp;,&nbsp;[0.2,-0.1,0.8]&nbsp;,&nbsp;[0.533,-0.233,0.8]]</tt></dd></dl>
 <dl><dt><a name="-getenergy"><strong>getenergy</strong></a>()</dt></dl>
 <dl><dt><a name="-hkl2str"><strong>hkl2str</strong></a>(hkl)</dt><dd><tt>Convert&nbsp;hkl&nbsp;to&nbsp;string&nbsp;(h,k,l)<br>
:param&nbsp;hkl:<br>
:return:&nbsp;str&nbsp;'(h,k,l)'</tt></dd></dl>
 <dl><dt><a name="-indx"><strong>indx</strong></a>(Q, UV)</dt><dd><tt>Index&nbsp;Q(x,y,z)&nbsp;on&nbsp;on&nbsp;lattice&nbsp;[h,k,l]&nbsp;with&nbsp;unit&nbsp;vectors&nbsp;UV<br>
Usage:<br>
&nbsp;&nbsp;HKL&nbsp;=&nbsp;<a href="#-indx">indx</a>(Q,UV)<br>
&nbsp;&nbsp;Q&nbsp;=&nbsp;[[nx3]]&nbsp;array&nbsp;of&nbsp;vectors<br>
&nbsp;&nbsp;UV&nbsp;=&nbsp;[[3x3]]&nbsp;matrix&nbsp;of&nbsp;vectors&nbsp;[a,b,c]</tt></dd></dl>
 <dl><dt><a name="-invert_sym"><strong>invert_sym</strong></a>(sym_op)</dt><dd><tt>Invert&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;given&nbsp;symmetry&nbsp;operation<br>
Usage:<br>
&nbsp;&nbsp;new_op&nbsp;=&nbsp;<a href="#-invert_sym">invert_sym</a>(sym_op)<br>
&nbsp;&nbsp;sym_op&nbsp;=&nbsp;str&nbsp;symmetry&nbsp;operation&nbsp;e.g.&nbsp;'x,y,z'<br>
&nbsp;&nbsp;new_op&nbsp;=&nbsp;inverted&nbsp;symmetry<br>
E.G.<br>
&nbsp;&nbsp;new_op&nbsp;=&nbsp;<a href="#-invert_sym">invert_sym</a>('x,y,z')<br>
&nbsp;&nbsp;&gt;&gt;&nbsp;new_op&nbsp;=&nbsp;'-x,-y,-z'</tt></dd></dl>
 <dl><dt><a name="-latpar2UV"><strong>latpar2UV</strong></a>(a, b, c, alpha<font color="#909090">=90.0</font>, beta<font color="#909090">=90.0</font>, gamma<font color="#909090">=120.0</font>)</dt><dd><tt>Convert&nbsp;a,b,c,alpha,beta,gamma&nbsp;to&nbsp;UV<br>
&nbsp;UV&nbsp;=&nbsp;<a href="#-latpar2UV">latpar2UV</a>(a,b,c,alpha=90.,beta=90.,gamma=120.)<br>
&nbsp;Vector&nbsp;c&nbsp;is&nbsp;defined&nbsp;along&nbsp;[0,0,1]<br>
&nbsp;Vector&nbsp;a&nbsp;and&nbsp;b&nbsp;are&nbsp;defined&nbsp;by&nbsp;the&nbsp;angles</tt></dd></dl>
 <dl><dt><a name="-latpar2UV_rot"><strong>latpar2UV_rot</strong></a>(a, b, c, alpha<font color="#909090">=90.0</font>, beta<font color="#909090">=90.0</font>, gamma<font color="#909090">=120.0</font>)</dt><dd><tt>Convert&nbsp;a,b,c,alpha,beta,gamma&nbsp;to&nbsp;UV<br>
&nbsp;UV&nbsp;=&nbsp;<a href="#-latpar2UV_rot">latpar2UV_rot</a>(a,b,c,alpha=90.,beta=90.,gamma=120.)<br>
&nbsp;Vector&nbsp;b&nbsp;is&nbsp;defined&nbsp;along&nbsp;[0,1,0]<br>
&nbsp;Vector&nbsp;a&nbsp;and&nbsp;c&nbsp;are&nbsp;defined&nbsp;by&nbsp;the&nbsp;angles</tt></dd></dl>
 <dl><dt><a name="-magnetic_form_factor"><strong>magnetic_form_factor</strong></a>(element, Qmag<font color="#909090">=0.0</font>)</dt><dd><tt>Read&nbsp;Magnetic&nbsp;form&nbsp;factor&nbsp;table,&nbsp;calculate&nbsp;&lt;j0(|Q|)&gt;<br>
Analytical&nbsp;approximation&nbsp;of&nbsp;the&nbsp;magnetic&nbsp;form&nbsp;factor:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;j0(|Q|)&gt;&nbsp;=&nbsp;A*exp(-a*s^2)&nbsp;+&nbsp;B*exp(-b*s^2)&nbsp;+&nbsp;C*exp(-c*s^2)&nbsp;+&nbsp;D,&nbsp;where&nbsp;s&nbsp;=&nbsp;sin(theta)/lambda&nbsp;in&nbsp;A-1<br>
See&nbsp;more&nbsp;about&nbsp;the&nbsp;approximatio&nbsp;here:&nbsp;https://www.ill.eu/sites/ccsl/ffacts/ffactnode3.html<br>
Note:&nbsp;Currently&nbsp;only&nbsp;J0&nbsp;terms&nbsp;are&nbsp;used&nbsp;and&nbsp;5d&nbsp;atoms&nbsp;are&nbsp;not&nbsp;currently&nbsp;included<br>
Usage:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qff&nbsp;=&nbsp;read_mff(element,Qmag)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;=&nbsp;str&nbsp;element&nbsp;name,&nbsp;e.g.&nbsp;'Co'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qmag&nbsp;=&nbsp;magnitude&nbsp;of&nbsp;Q=sin(theta)/lambda&nbsp;in&nbsp;A-1&nbsp;at&nbsp;which&nbsp;to&nbsp;calcualte,&nbsp;can&nbsp;be&nbsp;a&nbsp;list&nbsp;or&nbsp;array&nbsp;to&nbsp;return&nbsp;multiple&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qff&nbsp;=&nbsp;Magnetic&nbsp;form&nbsp;factor&nbsp;for&nbsp;element&nbsp;at&nbsp;Qmag<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Qff&nbsp;=&nbsp;read_mff('Co',np.arange(0,4,0.1))</tt></dd></dl>
 <dl><dt><a name="-maxHKL"><strong>maxHKL</strong></a>(Qmax, UV)</dt><dd><tt>Returns&nbsp;the&nbsp;maximum&nbsp;indexes&nbsp;for&nbsp;given&nbsp;max&nbsp;radius<br>
e.g.<br>
&nbsp;&nbsp;&nbsp;&nbsp;UVstar&nbsp;=&nbsp;<a href="#-RcSp">RcSp</a>([[3,0,0],[0,3,0],[0,0,10]])&nbsp;#&nbsp;A^-1<br>
&nbsp;&nbsp;&nbsp;&nbsp;Qmax&nbsp;=&nbsp;4.5&nbsp;#&nbsp;A^-1<br>
&nbsp;&nbsp;&nbsp;&nbsp;max_hkl&nbsp;=&nbsp;<a href="#-maxHKL">maxHKL</a>(Qmax,UVstar)<br>
&nbsp;&nbsp;&nbsp;&nbsp;max_hkl&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;[3,3,8]</tt></dd></dl>
 <dl><dt><a name="-orthogonal_axes"><strong>orthogonal_axes</strong></a>(x_axis<font color="#909090">=[1, 0, 0]</font>, y_axis<font color="#909090">=[0, 1, 0]</font>)</dt><dd><tt>Returns&nbsp;orthogonal&nbsp;right-handed&nbsp;cartesian&nbsp;axes&nbsp;based&nbsp;on&nbsp;the&nbsp;plane&nbsp;of&nbsp;two&nbsp;non-perpendicular&nbsp;vectors<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;x,y,z&nbsp;=&nbsp;<a href="#-orthogonal_axes">orthogonal_axes</a>([1,0,0],[0.5,0.5,0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;x&nbsp;=&nbsp;array([1,0,0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;y&nbsp;=&nbsp;array([0,1,0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;z&nbsp;=&nbsp;array([0,0,1])<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;x,y,z&nbsp;=&nbsp;<a href="#-orthogonal_axes">orthogonal_axes</a>([0,1,0],[0,0,1])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;x&nbsp;=&nbsp;array([0,1,0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;y&nbsp;=&nbsp;array([0,0,1])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;z&nbsp;=&nbsp;array([1,0,0])</tt></dd></dl>
 <dl><dt><a name="-readcif"><strong>readcif</strong></a>(filename<font color="#909090">=None</font>, debug<font color="#909090">=False</font>)</dt><dd><tt>Read&nbsp;a&nbsp;cif&nbsp;file&nbsp;in&nbsp;as&nbsp;a&nbsp;structure&nbsp;<br>
&nbsp;&nbsp;crys=<a href="#-readcif">readcif</a>(file)<br>
&nbsp;&nbsp;crys[key]&nbsp;=&nbsp;value<br>
keys&nbsp;are&nbsp;give&nbsp;by&nbsp;crys.keys()<br>
&nbsp;<br>
To&nbsp;debug&nbsp;the&nbsp;file,&nbsp;use:<br>
&nbsp;&nbsp;cif&nbsp;=&nbsp;<a href="#-readcif">readcif</a>(file,&nbsp;debug=True)</tt></dd></dl>
 <dl><dt><a name="-sum_sym_ref"><strong>sum_sym_ref</strong></a>(symhkl)</dt><dd><tt>Remove&nbsp;equivalent&nbsp;hkl&nbsp;positions&nbsp;and&nbsp;return&nbsp;the&nbsp;number&nbsp;of&nbsp;times&nbsp;each&nbsp;is&nbsp;generated.</tt></dd></dl>
 <dl><dt><a name="-symmetry_ops2magnetic"><strong>symmetry_ops2magnetic</strong></a>(operations)</dt><dd><tt>Convert&nbsp;list&nbsp;of&nbsp;string&nbsp;symmetry&nbsp;operations&nbsp;to&nbsp;magnetic&nbsp;symmetry&nbsp;operations<br>
i.e.&nbsp;remove&nbsp;translations</tt></dd></dl>
 <dl><dt><a name="-uiso2biso"><strong>uiso2biso</strong></a>(uiso)</dt><dd><tt>Convert&nbsp;U&nbsp;isotropic&nbsp;thermal&nbsp;parameters&nbsp;to&nbsp;B&nbsp;isotropic&nbsp;thermal&nbsp;parameters<br>
:param&nbsp;uiso:&nbsp;Uiso&nbsp;value&nbsp;or&nbsp;array<br>
:return:&nbsp;Biso&nbsp;value&nbsp;or&nbsp;array</tt></dd></dl>
 <dl><dt><a name="-wave2energy"><strong>wave2energy</strong></a>(wavelength)</dt><dd><tt>Converts&nbsp;wavelength&nbsp;in&nbsp;A&nbsp;to&nbsp;energy&nbsp;in&nbsp;keV<br>
&nbsp;Energy&nbsp;=&nbsp;<a href="#-wave2energy">wave2energy</a>(wavelength)</tt></dd></dl>
 <dl><dt><a name="-xray_scattering_factor"><strong>xray_scattering_factor</strong></a>(element, Qmag<font color="#909090">=0</font>)</dt><dd><tt>Read&nbsp;X-ray&nbsp;scattering&nbsp;factor&nbsp;table,&nbsp;calculate&nbsp;f(|Q|)<br>
Uses&nbsp;the&nbsp;oefficients&nbsp;for&nbsp;analytical&nbsp;approximation&nbsp;to&nbsp;the&nbsp;scattering&nbsp;factors&nbsp;-&nbsp;ITC,&nbsp;p578<br>
&nbsp;Qff&nbsp;=&nbsp;read_xsf(element,Qmag=[0])</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>__version__</strong> = '2.5'<br>
<strong>datadir</strong> = r'C:\Users\grp66007\Dropbox\Python\Dans_Diffraction\Dans_Diffraction\data'</td></tr></table>
</body></html>